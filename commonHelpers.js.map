{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// render-functions.js\n\nexport function renderGallery(images, galleryContainer, loader, loadMoreButton) {\n    const galleryHTML = images.hits\n      .map(\n        (image) => `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <div class=\"img-content\">\n            <div>\n              <h3>Likes</h3>\n              <p>${image.likes}</p>\n            </div>\n            <div>\n              <h3>Views</h3>\n              <p>${image.views}</p>\n            </div>\n            <div>\n              <h3>Comments</h3>\n              <p>${image.comments}</p>\n            </div>\n            <div>\n              <h3>Downloads</h3>\n              <p>${image.downloads}</p>\n            </div>\n          </div>\n        </a>`\n      )\n      .join('');\n  \n    galleryContainer.innerHTML += galleryHTML;\n  }\n  \n  export function clearGallery() {\n    gallery.innerHTML = '';\n  }\n  \n  export function showErrorMessage() {\n    iziToast.show({\n      message: 'Sorry, something went wrong. Please try again later.',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n  }\n  \n  export function checkLoadMore(images, loadMoreButton, perPage) {\n    if (images.hits.length < perPage || images.totalHits === images.total) {\n      loadMoreButton.style.display = 'none';\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n  }\n  ","// pixabay-api.js\n\n\nconst apiKey = '42327232-15779c8439a7c971fac782e02';\n\nexport async function getPixabayImages(query, page, perPage) {\n  const urlParams = new URLSearchParams({\n    key: apiKey,\n    q: query,\n    page: page,\n    per_page: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const response = await fetch(`https://pixabay.com/api/?${urlParams}`);\n\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n\n  return response.json();\n}\n","// main.js\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderGallery, clearGallery, showErrorMessage, checkLoadMore } from './js/render-functions.js';\nimport { getPixabayImages } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nloader.style.display = 'none';\nconst searchParams = {\n  key: '42327232-15779c8439a7c971fac782e02',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: '',\n  per_page: 12, // desired number of images per page\n  page: 1, // Initial page\n};\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  loader.style.display = 'block';\n  const inputValue = e.target.elements.input.value;\n  searchParams.q = inputValue;\n  \n  try {\n    const images = await getPixabayImages(searchParams);\n    handleApiResponse(images);\n  } catch (error) {\n    console.error(error);\n    showErrorMessage();\n  }\n\n  e.target.reset();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  searchParams.page++;\n  \n  try {\n    const images = await getPixabayImages(searchParams);\n    handleApiResponse(images);\n  } catch (error) {\n    console.error(error);\n    showErrorMessage();\n  }\n});\n\nfunction handleApiResponse(images) {\n  if (images.hits.length === 0) {\n    showErrorMessage();\n    clearGallery();\n  } else {\n    renderGallery(images, gallery, loader, loadMoreButton);\n    checkLoadMore(images, loadMoreButton, searchParams.per_page);\n  }\n\n  let lightBox = new SimpleLightbox('.gallery-link');\n  lightBox.refresh();\n  loader.style.display = 'none';\n}\n"],"names":["renderGallery","images","galleryContainer","loader","loadMoreButton","galleryHTML","image","clearGallery","showErrorMessage","checkLoadMore","perPage","apiKey","getPixabayImages","query","page","urlParams","response","form","gallery","searchParams","e","inputValue","handleApiResponse","error","SimpleLightbox"],"mappings":"svBAEO,SAASA,EAAcC,EAAQC,EAAkBC,EAAQC,EAAgB,CAC5E,MAAMC,EAAcJ,EAAO,KACxB,IACEK,GAAU,iCAAiCA,EAAM,aAAa;AAAA,4CAC3BA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,mBAI/DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,mBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,aAI3B,EACA,KAAK,EAAE,EAEVJ,EAAiB,WAAaG,CAC/B,CAEM,SAASE,GAAe,CAC7B,QAAQ,UAAY,EACrB,CAEM,SAASC,GAAmB,CACjC,SAAS,KAAK,CACZ,QAAS,uDACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,YAAa,OACb,kBAAmB,OACnB,SAAU,OAChB,CAAK,CACF,CAEM,SAASC,EAAcR,EAAQG,EAAgBM,EAAS,CACzDT,EAAO,KAAK,OAASS,GAAWT,EAAO,YAAcA,EAAO,MAC9DG,EAAe,MAAM,QAAU,OAE/BA,EAAe,MAAM,QAAU,OAErC,CCnDA,MAAMO,EAAS,qCAER,eAAeC,EAAiBC,EAAOC,EAAMJ,EAAS,CAC3D,MAAMK,EAAY,IAAI,gBAAgB,CACpC,IAAKJ,EACL,EAAGE,EACH,KAAMC,EACN,SAAUJ,EACV,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKM,EAAW,MAAM,MAAM,4BAA4BD,CAAS,EAAE,EAEpE,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MAClB,CCdA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3Cf,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,gBAAgB,EAE9DD,EAAO,MAAM,QAAU,OACvB,MAAMgB,EAAe,CACnB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAG,GACH,SAAU,GACV,KAAM,CACR,EAEAF,EAAK,iBAAiB,SAAU,MAAOG,GAAM,CAC3CA,EAAE,eAAc,EAChBjB,EAAO,MAAM,QAAU,QACvB,MAAMkB,EAAaD,EAAE,OAAO,SAAS,MAAM,MAC3CD,EAAa,EAAIE,EAEjB,GAAI,CACF,MAAMpB,EAAS,MAAMW,EAAiBO,CAAY,EAClDG,EAAkBrB,CAAM,CACzB,OAAQsB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBf,GACD,CAEDY,EAAE,OAAO,OACX,CAAC,EAEDhB,EAAe,iBAAiB,QAAS,SAAY,CACnDD,EAAO,MAAM,QAAU,QACvBgB,EAAa,OAEb,GAAI,CACF,MAAMlB,EAAS,MAAMW,EAAiBO,CAAY,EAClDG,EAAkBrB,CAAM,CACzB,OAAQsB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBf,GACD,CACH,CAAC,EAED,SAASc,EAAkBrB,EAAQ,CAC7BA,EAAO,KAAK,SAAW,GACzBO,IACAD,MAEAP,EAAcC,EAAQiB,CAA+B,EACrDT,EAAcR,EAAQG,EAAgBe,EAAa,QAAQ,GAG9C,IAAIK,EAAe,eAAe,EACxC,QAAO,EAChBrB,EAAO,MAAM,QAAU,MACzB"}